{
  "id": "analyze_sentiment_trends",
  "name": "analyze_sentiment_trends",
  "description": "Analyze sentiment trends for a product over the last 30 days. Detects sentiment shifts, complaint patterns, and emerging issues. Returns daily averages of sentiment scores, complaint counts, and total review counts.",
  "type": "esql",
  "configuration": {
    "query": "FROM customer_reviews | WHERE product == \"{{product_name}}\" | WHERE @timestamp >= NOW() - 30d | STATS avg_sentiment = AVG(sentiment_score), complaint_count = COUNT(WHERE sentiment_score < 0.3), total_reviews = COUNT() BY BUCKET(@timestamp, 1d) | SORT @timestamp DESC"
  },
  "params": {
    "product_name": {
      "type": "keyword",
      "description": "The name of the product to analyze trends for (e.g., 'Product A', 'Product B', 'Product C')",
      "required": true
    }
  }
}
